FROM openjdk:17-alpine as build

EXPOSE 8001

ENV PORT = 8001
ENV EUREKA_URI=http://localhost:8000/eureka

ENV INSIGHT_PORT=8807
ENV INSIGHT_DB_URL = localhost:3306
ENV INSIGHT_DB_NAME = insightsDb
ENV INSIGHT_DB_USER = root
ENV INSIGHT_DB_PASSWORD = 1

ENV SURVEY_PORT=8806
ENV SURVEY_DB_URL = localhost:3306
ENV SURVEY_DB_NAME = surveyDb
ENV SURVEY_DB_USER = root
ENV SURVEY_DB_PASSWORD = 1

ENV NEWANN_PORT=8808
ENV NEWANN_DB_URL = localhost:3306
ENV NEWANN_DB_NAME = newsAnnouncementsDb
ENV NEWANN_DB_USER = root
ENV NEWANN_DB_PASSWORD = 1

ENV EVENT_PORT=8801
ENV EVENT_DB_URL = localhost:3306
ENV EVENT_DB_NAME = eventsDb
ENV EVENT_DB_USER = root
ENV EVENT_DB_PASSWORD = 1

ENV JOB_PORT=8803
ENV JOB_DB_URL = localhost:3306
ENV JOB_DB_NAME = jobsDb
ENV JOB_DB_USER = root
ENV JOB_DB_PASSWORD = 1

ENV CHAT_PORT=8809
ENV CHAT_DB_URL = localhost:3306
ENV CHAT_DB_NAME = chatDB
ENV CHAT_DB_USER = root
ENV CHAT_DB_PASSWORD = 1

RUN apk add --no-cache maven
WORKDIR /app
COPY . /app
RUN mvn package
ENTRYPOINT ["java","-jar","/app/target/ConfigurationService-0.0.1-SNAPSHOT.jar"]